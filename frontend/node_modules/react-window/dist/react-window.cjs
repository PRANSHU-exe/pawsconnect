"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const J=require("react/jsx-runtime"),i=require("react");function ie(e){let t=e;for(;t;){if(t.dir)return t.dir==="rtl";t=t.parentElement}return!1}function le(e,t){const[s,r]=i.useState(t==="rtl");return i.useLayoutEffect(()=>{e&&(t||r(ie(e)))},[t,e]),s}const P=typeof window<"u"?i.useLayoutEffect:i.useEffect;function Z(e){if(e!==void 0)switch(typeof e){case"number":return e;case"string":{if(e.endsWith("px"))return parseFloat(e);break}}}function ce({box:e,defaultHeight:t,defaultWidth:s,disabled:r,element:o,mode:n,style:c}){const{styleHeight:a,styleWidth:l}=i.useMemo(()=>({styleHeight:Z(c?.height),styleWidth:Z(c?.width)}),[c?.height,c?.width]),[d,f]=i.useState({height:t,width:s}),p=r||n==="only-height"&&a!==void 0||n==="only-width"&&l!==void 0||a!==void 0&&l!==void 0;return P(()=>{if(o===null||p)return;const S=new ResizeObserver(z=>{for(const k of z){const{contentRect:m,target:v}=k;o===v&&f(w=>w.height===m.height&&w.width===m.width?w:{height:m.height,width:m.width})}});return S.observe(o,{box:e}),()=>{S?.unobserve(o)}},[e,p,o,a,l]),i.useMemo(()=>({height:a??d.height,width:l??d.width}),[d,a,l])}function ae(e){const t=i.useRef(()=>{throw new Error("Cannot call an event handler while rendering.")});return P(()=>{t.current=e},[e]),i.useCallback(s=>t.current?.(s),[t])}let H=null;function fe(e=!1){if(H===null||e){const t=document.createElement("div"),s=t.style;s.width="50px",s.height="50px",s.overflow="scroll",s.direction="rtl";const r=document.createElement("div"),o=r.style;return o.width="100px",o.height="100px",t.appendChild(r),document.body.appendChild(t),t.scrollLeft>0?H="positive-descending":(t.scrollLeft=1,t.scrollLeft===0?H="negative":H="positive-ascending"),document.body.removeChild(t),H}return H}function C({containerElement:e,direction:t,isRtl:s,scrollOffset:r}){if(t==="horizontal"&&s)switch(fe()){case"negative":return-r;case"positive-descending":{if(e){const{clientWidth:o,scrollLeft:n,scrollWidth:c}=e;return c-o-n}break}}return r}function G(e,t="Assertion error"){if(!e)throw console.error(t),Error(t)}function U(e,t){if(e===t)return!0;if(!!e!=!!t||(G(e!==void 0),G(t!==void 0),Object.keys(e).length!==Object.keys(t).length))return!1;for(const s in e)if(!Object.is(t[s],e[s]))return!1;return!0}function ee({cachedBounds:e,itemCount:t,itemSize:s}){if(t===0)return 0;if(typeof s=="number")return t*s;{const r=e.get(e.size===0?0:e.size-1);G(r!==void 0,"Unexpected bounds cache miss");const o=(r.scrollOffset+r.size)/e.size;return t*o}}function ue({align:e,cachedBounds:t,index:s,itemCount:r,itemSize:o,containerScrollOffset:n,containerSize:c}){const a=ee({cachedBounds:t,itemCount:r,itemSize:o}),l=t.get(s),d=Math.max(0,Math.min(a-c,l.scrollOffset)),f=Math.max(0,l.scrollOffset-c+l.size);switch(e==="smart"&&(n>=f&&n<=d?e="auto":e="center"),e){case"start":return d;case"end":return f;case"center":return l.scrollOffset<=c/2?0:l.scrollOffset+l.size/2>=a-c/2?a-c:l.scrollOffset+l.size/2-c/2;case"auto":default:return n>=f&&n<=d?n:n<f?f:d}}function _({cachedBounds:e,containerScrollOffset:t,containerSize:s,itemCount:r,overscanCount:o}){const n=r-1;let c=0,a=-1,l=0,d=-1,f=0;for(;f<n;){const p=e.get(f);if(p.scrollOffset+p.size>t)break;f++}for(c=f,l=Math.max(0,c-o);f<n;){const p=e.get(f);if(p.scrollOffset+p.size>=t+s)break;f++}return a=Math.min(n,f),d=Math.min(r-1,a+o),c<0&&(c=0,a=-1,l=0,d=-1),{startIndexVisible:c,stopIndexVisible:a,startIndexOverscan:l,stopIndexOverscan:d}}function de({itemCount:e,itemProps:t,itemSize:s}){const r=new Map;return{get(o){for(G(o<e,`Invalid index ${o}`);r.size-1<o;){const c=r.size;let a;switch(typeof s){case"function":{a=s(c,t);break}case"number":{a=s;break}}if(c===0)r.set(c,{size:a,scrollOffset:0});else{const l=r.get(c-1);G(l!==void 0,`Unexpected bounds cache miss for index ${o}`),r.set(c,{scrollOffset:l.scrollOffset+l.size,size:a})}}const n=r.get(o);return G(n!==void 0,`Unexpected bounds cache miss for index ${o}`),n},set(o,n){r.set(o,n)},get size(){return r.size}}}function he({itemCount:e,itemProps:t,itemSize:s}){return i.useMemo(()=>de({itemCount:e,itemProps:t,itemSize:s}),[e,t,s])}function xe({containerSize:e,itemSize:t}){let s;switch(typeof t){case"string":{G(t.endsWith("%"),`Invalid item size: "${t}"; string values must be percentages (e.g. "100%")`),G(e!==void 0,"Container size must be defined if a percentage item size is specified"),s=e*parseInt(t)/100;break}default:{s=t;break}}return s}function K({containerElement:e,containerStyle:t,defaultContainerSize:s=0,direction:r,isRtl:o=!1,itemCount:n,itemProps:c,itemSize:a,onResize:l,overscanCount:d}){const[f,p]=i.useState({startIndexVisible:0,startIndexOverscan:0,stopIndexVisible:-1,stopIndexOverscan:-1}),{startIndexVisible:S,startIndexOverscan:z,stopIndexVisible:k,stopIndexOverscan:m}={startIndexVisible:Math.min(n-1,f.startIndexVisible),startIndexOverscan:Math.min(n-1,f.startIndexOverscan),stopIndexVisible:Math.min(n-1,f.stopIndexVisible),stopIndexOverscan:Math.min(n-1,f.stopIndexOverscan)},{height:v=s,width:w=s}=ce({defaultHeight:r==="vertical"?s:void 0,defaultWidth:r==="horizontal"?s:void 0,element:e,mode:r==="vertical"?"only-height":"only-width",style:t}),L=i.useRef({height:0,width:0}),y=r==="vertical"?v:w,u=xe({containerSize:y,itemSize:a});i.useLayoutEffect(()=>{if(typeof l=="function"){const h=L.current;(h.height!==v||h.width!==w)&&(l({height:v,width:w},{...h}),h.height=v,h.width=w)}},[v,l,w]);const g=he({itemCount:n,itemProps:c,itemSize:u}),T=i.useCallback(h=>g.get(h),[g]),V=i.useCallback(()=>ee({cachedBounds:g,itemCount:n,itemSize:u}),[g,n,u]),R=i.useCallback(h=>{const I=C({containerElement:e,direction:r,isRtl:o,scrollOffset:h});return _({cachedBounds:g,containerScrollOffset:I,containerSize:y,itemCount:n,overscanCount:d})},[g,e,y,r,o,n,d]);P(()=>{const h=(r==="vertical"?e?.scrollTop:e?.scrollLeft)??0;p(R(h))},[e,r,R]),P(()=>{if(!e)return;const h=()=>{p(I=>{const{scrollLeft:x,scrollTop:b}=e,M=C({containerElement:e,direction:r,isRtl:o,scrollOffset:r==="vertical"?b:x}),D=_({cachedBounds:g,containerScrollOffset:M,containerSize:y,itemCount:n,overscanCount:d});return U(D,I)?I:D})};return e.addEventListener("scroll",h),()=>{e.removeEventListener("scroll",h)}},[g,e,y,r,n,d]);const E=ae(({align:h="auto",containerScrollOffset:I,index:x})=>{let b=ue({align:h,cachedBounds:g,containerScrollOffset:I,containerSize:y,index:x,itemCount:n,itemSize:u});if(e){if(b=C({containerElement:e,direction:r,isRtl:o,scrollOffset:b}),typeof e.scrollTo!="function"){const M=R(b);U(f,M)||p(M)}return b}});return{getCellBounds:T,getEstimatedSize:V,scrollToIndex:E,startIndexOverscan:z,startIndexVisible:S,stopIndexOverscan:m,stopIndexVisible:k}}function te(e){return i.useMemo(()=>e,Object.values(e))}function se(e,t){const{ariaAttributes:s,style:r,...o}=e,{ariaAttributes:n,style:c,...a}=t;return U(s,n)&&U(r,c)&&U(o,a)}function pe({cellComponent:e,cellProps:t,children:s,className:r,columnCount:o,columnWidth:n,defaultHeight:c=0,defaultWidth:a=0,dir:l,gridRef:d,onCellsRendered:f,onResize:p,overscanCount:S=3,rowCount:z,rowHeight:k,style:m,tagName:v="div",...w}){const L=te(t),y=i.useMemo(()=>i.memo(e,se),[e]),[u,g]=i.useState(null),T=le(u,l),{getCellBounds:V,getEstimatedSize:R,startIndexOverscan:E,startIndexVisible:h,scrollToIndex:I,stopIndexOverscan:x,stopIndexVisible:b}=K({containerElement:u,containerStyle:m,defaultContainerSize:a,direction:"horizontal",isRtl:T,itemCount:o,itemProps:L,itemSize:n,onResize:p,overscanCount:S}),{getCellBounds:M,getEstimatedSize:D,startIndexOverscan:B,startIndexVisible:Q,scrollToIndex:Y,stopIndexOverscan:q,stopIndexVisible:X}=K({containerElement:u,containerStyle:m,defaultContainerSize:c,direction:"vertical",itemCount:z,itemProps:L,itemSize:k,onResize:p,overscanCount:S});i.useImperativeHandle(d,()=>({get element(){return u},scrollToCell({behavior:W="auto",columnAlign:O="auto",columnIndex:j,rowAlign:A="auto",rowIndex:$}){const F=I({align:O,containerScrollOffset:u?.scrollLeft??0,index:j}),oe=Y({align:A,containerScrollOffset:u?.scrollTop??0,index:$});typeof u?.scrollTo=="function"&&u.scrollTo({behavior:W,left:F,top:oe})},scrollToColumn({align:W="auto",behavior:O="auto",index:j}){const A=I({align:W,containerScrollOffset:u?.scrollLeft??0,index:j});typeof u?.scrollTo=="function"&&u.scrollTo({behavior:O,left:A})},scrollToRow({align:W="auto",behavior:O="auto",index:j}){const A=Y({align:W,containerScrollOffset:u?.scrollTop??0,index:j});typeof u?.scrollTo=="function"&&u.scrollTo({behavior:O,top:A})}}),[u,I,Y]),i.useEffect(()=>{E>=0&&x>=0&&B>=0&&q>=0&&f&&f({columnStartIndex:h,columnStopIndex:b,rowStartIndex:Q,rowStopIndex:X},{columnStartIndex:E,columnStopIndex:x,rowStartIndex:B,rowStopIndex:q})},[f,E,h,x,b,B,Q,q,X]);const re=i.useMemo(()=>{const W=[];if(o>0&&z>0)for(let O=B;O<=q;O++){const j=M(O),A=[];for(let $=E;$<=x;$++){const F=V($);A.push(i.createElement(y,{...L,ariaAttributes:{"aria-colindex":$+1,role:"gridcell"},columnIndex:$,key:$,rowIndex:O,style:{position:"absolute",left:T?void 0:0,right:T?0:void 0,transform:`translate(${T?-F.scrollOffset:F.scrollOffset}px, ${j.scrollOffset}px)`,height:j.size,width:F.size}}))}W.push(J.jsx("div",{role:"row","aria-rowindex":O+1,children:A},O))}return W},[y,L,o,E,x,V,M,T,z,B,q]),ne=J.jsx("div",{"aria-hidden":!0,style:{height:D(),width:R(),zIndex:-1}});return i.createElement(v,{"aria-colcount":o,"aria-rowcount":z,role:"grid",...w,className:r,dir:l,ref:g,style:{position:"relative",width:"100%",height:"100%",maxHeight:"100%",maxWidth:"100%",flexGrow:1,overflow:"auto",...m}},re,s,ne)}const ge=i.useState,ve=i.useRef;function Ie({children:e,className:t,defaultHeight:s=0,listRef:r,onResize:o,onRowsRendered:n,overscanCount:c=3,rowComponent:a,rowCount:l,rowHeight:d,rowProps:f,tagName:p="div",style:S,...z}){const k=te(f),m=i.useMemo(()=>i.memo(a,se),[a]),[v,w]=i.useState(null),{getCellBounds:L,getEstimatedSize:y,scrollToIndex:u,startIndexOverscan:g,startIndexVisible:T,stopIndexOverscan:V,stopIndexVisible:R}=K({containerElement:v,containerStyle:S,defaultContainerSize:s,direction:"vertical",itemCount:l,itemProps:k,itemSize:d,onResize:o,overscanCount:c});i.useImperativeHandle(r,()=>({get element(){return v},scrollToRow({align:I="auto",behavior:x="auto",index:b}){const M=u({align:I,containerScrollOffset:v?.scrollTop??0,index:b});typeof v?.scrollTo=="function"&&v.scrollTo({behavior:x,top:M})}}),[v,u]),i.useEffect(()=>{g>=0&&V>=0&&n&&n({startIndex:T,stopIndex:R},{startIndex:g,stopIndex:V})},[n,g,T,V,R]);const E=i.useMemo(()=>{const I=[];if(l>0)for(let x=g;x<=V;x++){const b=L(x);I.push(i.createElement(m,{...k,ariaAttributes:{"aria-posinset":x+1,"aria-setsize":l,role:"listitem"},key:x,index:x,style:{position:"absolute",left:0,transform:`translateY(${b.scrollOffset}px)`,height:b.size,width:"100%"}}))}return I},[m,L,l,k,g,V]),h=J.jsx("div",{"aria-hidden":!0,style:{height:y(),width:"100%",zIndex:-1}});return i.createElement(p,{role:"list",...z,className:t,ref:w,style:{position:"relative",maxHeight:"100%",flexGrow:1,overflowY:"auto",...S}},E,e,h)}const be=i.useState,me=i.useRef;let N=-1;function we(e=!1){if(N===-1||e){const t=document.createElement("div"),s=t.style;s.width="50px",s.height="50px",s.overflow="scroll",document.body.appendChild(t),N=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return N}exports.Grid=pe;exports.List=Ie;exports.getScrollbarSize=we;exports.useGridCallbackRef=ge;exports.useGridRef=ve;exports.useListCallbackRef=be;exports.useListRef=me;
//# sourceMappingURL=react-window.cjs.map
